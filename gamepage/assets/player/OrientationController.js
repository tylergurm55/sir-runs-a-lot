const kOrientationChangedEvent = 'OrientationController:OrientationChangedEvent'; const OrientationController = Class.create({ initialize() { if (gDevice == kDeviceMobile) { Event.observe(window, 'orientationchange', this.handleDeviceOrientationChangeEvent.bind(this)); this.handleDeviceOrientationChangeEvent(); } this.orientation = kOrientationUnknown; }, handleDeviceOrientationChangeEvent(b) { const c = window.orientation; let a = kOrientationUnknown; if ((c === 0) || (c === 180)) { a = kOrientationPortrait; } else { a = kOrientationLandscape; } this.changeOrientation(a); }, changeOrientation(a) { this.orientation = a; document.fire(kOrientationChangedEvent, { orientation: this.orientation }); } });
